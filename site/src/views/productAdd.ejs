<%-include("./partials/head.ejs") %> 
<script src="/javascripts/createValidator.js"></script>
<%-include("./partials/header.ejs") %> 



<body>

  <section class="container-fluid conte">
    <div class="container">
      <div class="row">
        <div class= 'col-12 col-md-12 col-lg-6 formulario'>
           <h2 class="agregar"><%= title %> </h2>

           <form action="/products/add" method="POST" enctype="multipart/form-data" id="productAdd">
            <div>

            <div class="form-row">

              <div class="form-group col-12 col-xl-6">
                <label for="Nombre del producto"></label>
                <input type="text"
                class="form-control <%= (typeof old != 'undefined' && old.nombre)?"is-valid":(typeof errors != 'undefined' && errors.nombre)?"is-invalid": ""  %>"
                id="nombre"  name="nombre" placeholder="Nombre del producto"/>
                <span id="errorNombre" class="text-danger" ><%= (typeof errors != 'undefined' && errors.nombre)?errors.nombre.msg: "" %></span>
              </div>

              <div class="form-group col-12 col-xl-6">
                <label for="Titulo"></label>
                <select name="categoria" id="categoria" class="form-control <%= (typeof old != 'undefined' && old.categoria)?"is-valid":(typeof errors != 'undefined' && errors.categoria)?"is-invalid": ""  %>">
                  <option value="">Eligí la categoría</option>
                  <% if (typeof oldCategoria != 'undefined') { %>
                    <option value="<%= old.categoria %> " selected><%= oldCategoria %> </option>
                <% } %>
                  <% categorias.forEach(categoria => { %>
                      <option id="categoria" value="<%= categoria.id %>"><%= categoria.nombre %> </option>
                  <% }) %>>
                </select>
                <span id="errorCategoria" class="text-danger"><%= (typeof errors != 'undefined' && errors.categoria)?errors.categoria.msg: "" %></span>
              </div>

            </div>

        
            <div class="form-row">
              <div class="form-group col-12 col-xl-6">
                <label for="precio"></label>
                <input type="number"
                class="form-control <%= (typeof old != 'undefined' && old.precio && !errors.precio)?"is-valid":(typeof errors != 'undefined' && errors.precio)?"is-invalid": ""  %>"
                id="precio" value="<%= (typeof old != 'undefined' && old.precio)?old.precio:'' %>" placeholder="Precio" name="precio" min=1 />
                <span id="errorPrecio" class="text-danger"><%= (typeof errors != 'undefined' && errors.precio)?errors.precio.msg: "" %></span>
              </div>

              <div class="form-group col-12">
                <label for="descripcion"><h3> Descripción del producto </h3></label>
                <textarea name="descripcion" id="descripcion" cols="10" rows="5" class="form-control <%= (typeof old != 'undefined' && old.descripcion && !errors.descripcion)?"is-valid":(typeof errors != 'undefined' && errors.descripcion)?"is-invalid": ""  %>"><%= (typeof old != 'undefined' && old.descripcion)?old.descripcion:'' %></textarea>        
                <span id="errorDescripcion" class="text-danger"><%= (typeof errors != 'undefined' && errors.descripcion)?errors.descripcion.msg: "" %></span>
              </div>
            </div>
         
            <div class="form-row">
                <div class="form-group col-12 col-xl-6">
                    <div class="custom-file">
                      <div class="input-group mb-3">
                              
                        <div class="custom-file">
                          <input type="file" class="custom-file-input imagen" id="file" aria-describedby="inputGroupFileAddon01" name="imagen">
                          <label class="custom-file-label" for="inputGroupFile01">imagenes</label>
                        </div>
                      </div>
                      <span id="errorImagen" class="text-danger"><%= (typeof errors != 'undefined' && errors.imagen)?errors.imagen.msg: "" %></span>
                    </div>
                  </div>
            </div>
            
            <div class="form-row d-flex justify-content-between">
              <span id="msgError" class="text-danger"></span>
            </div>

            <div class="mt-5 mr-5 d-flex justify-content-end">
              <button type="submit" class="btn btn-outline-primary">Publicar</button>
            </div>
    
            
            </div>
            </div>
            <!--vista previa de imagen-->
            <div class="col-12 col-md-12 col-lg-6">
            <div class="d-flex justify-content-center ">
              <img src="/images/vista previa.jpg" alt="" id="vistaPrevia" class="img-thumbnail producto">
            </div>
            </div>
          
          </form>

      </div>    
    </div>
  </section>

  <%-include("./partials/footer.ejs") %> 
  </body>
</html>